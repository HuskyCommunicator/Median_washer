# OCR 调试功能说明

## 功能介绍
为了帮助诊断和优化 OCR 识别准确度，程序现在支持：
- **调试模式**：保存所有传递给 OCR 引擎的图片
- **可调整放大倍数**：根据字体大小调整图片放大倍数（默认5倍）

## 使用方法

### GUI 界面使用
1. 启动 `python gui.py`
2. 在界面控制区域找到：
   - **"调试模式"** 复选框 - 勾选后保存OCR图片
   - **"OCR放大倍数"** 输入框 - 调整图片放大倍数（推荐3-10倍）
3. 根据字体大小调整放大倍数：
   - **字体较大清晰**：3-4倍
   - **普通字体**：5倍（默认）
   - **字体较小**：6-8倍
   - **极小字体**：8-10倍
4. 勾选调试模式后再点击"开始洗炼"
5. 所有 OCR 识别的图片会自动保存到 `ocr_debug/` 目录

### 命令行使用
```bash
# 启用调试模式
python run_washer_v2.py --debug

# 设置放大倍数（例如8倍）
python run_washer_v2.py --scale=8.0

# 同时启用调试和设置放大倍数
python run_washer_v2.py --debug --scale=8.0
```

## 查看调试图片
- 调试图片保存在项目根目录的 `ocr_debug/` 文件夹
- 文件命名格式：`ocr_capture_1.png`, `ocr_capture_2.png` ...
- 图片已经过放大处理，与实际 OCR 识别的图片完全一致
- 控制台会显示每张图片的保存路径、原始截图区域和放大倍数

## 如何选择合适的放大倍数

### 步骤：
1. 先使用默认5倍，开启调试模式运行一次
2. 查看 `ocr_debug/` 文件夹中保存的图片
3. 观察图片中的文字是否清晰：
   - **文字很大很清晰** → 降低到 3-4 倍
   - **文字清晰度适中** → 保持 5 倍
   - **文字偏小模糊** → 提高到 6-8 倍
   - **文字非常小** → 提高到 8-10 倍
4. 调整放大倍数后重新测试

### 注意：
- 放大倍数过小：文字太小，OCR识别不准
- 放大倍数过大：可能产生锯齿，影响识别
- 合理范围：3-10倍

## 优化建议
查看保存的图片后，您可以：
1. 检查截图区域是否准确覆盖了文字区域
2. 观察放大后的图片质量，决定是否需要调整放大倍数
3. 检查文字是否清晰，判断是否需要调整游戏分辨率或截图区域
4. 如果文字边缘模糊，可以尝试调整游戏分辨率

## 注意事项
- 调试模式会占用一些磁盘空间，不使用时请关闭
- 调试图片不会被 git 提交（已加入 .gitignore）
- 每次运行会从 1 重新编号，不会覆盖旧图片
- 放大倍数设置会影响 OCR 处理速度，倍数越高越慢
